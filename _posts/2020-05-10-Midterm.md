---
layout: post
author: Younji Kim
---
# Linux
## 컴퓨터 시스템 관리
### 20190960 김윤지

_ _ _

## ★★ 실습 영상 ★★
[중간고사 대체과제 영상](https://youtu.be/m25oAiZOx-Q)              
하나의 영상으로 편집하여 유튜브에 올렸습니다.          
                  
### 1) 실무 환경의 우분투 설치          
VMware에 Midterm이라는 이름의 가상머신을 만들고 Edit virtual machine settings을 눌러 1TB짜리 하드디스크 2개와 2GB의 RAM을 추가하였다. 부팅할 때 ios파일을 먼저 거쳐가도록 설정한 뒤 실행하여 우분투 데스크탑 버전을 설치했다. 설치하는 도중 설치 유형에서 Something else를 눌러 파티션을 직접 추가했다. 중간고사 안내자료에 나온 것처럼 swap, /boot /srv /var / /home의 파티션으로 나누고 명시한 대로의 크기로 나누었다.       
그리고 결과 확인을 위하여 `sudo fdisk -l /dev/sda` `mount`를 입력하여 파티션이 제대로 나누어졌는지 확인하고, 각 장치들이 마운트되어있는지 확인하였다.         
과제를 진행하다가 파티션 할당할 때의 기억이 가물가물해서 다시 한번 앞의 내용을 정독했다. 처음에는 프라이머리로 몽땅 설정했다가 안나눠지길래 구글링(<https://linuxism.tistory.com/514>)을 통해 최대 4개까지만 primary 파티션으로 쓸 수 있고 나머지는 논리적 파티션으로 만듦으로써 파티션 구성을 자유롭게 할 수 있다는 걸 알게되었다.          
             
### 2) RAID6 구성          
Edit virtual machine settings에 들어가 각각 1TB씩 새로운 디스크 5개를 추가하였다. mdadm을 설치하여 RAID를 생성하였고, `mkfs.ext4 /dev/md6`을 입력하여 포멧, ext4의 파일시스템을 생성하였다. 대체과제 안내에 마운트 포인트는 /raid6이라 나와있으므로 해당 디렉터리를 `mkdir /raid6`으로 만들었다. `mount /dev/md6 /raid6` 명령어를 통헤 /raid6에다 장치들을 마운트하였다.            
RAID6 구성은 생각보다 간단했다. level을 6으로 두고 RAID5 구성했던 것과 거의 똑같이 했다. 특별한 문제 없이 RAID6 구성 작업이 완료되서 안도의 한숨을 쉬었다. 다만 5개의 디스크를 추가하는데 각각 1TB씩이여서 순간 흠칫했다. 실제 내 SSD를 쓰는 건 아니지만 뭔가 아까운 느낌이 들었던 듯..          
              
### 3) 백업 자동화         
매월 1일 새벽 3시 1분에 /home 디렉터리와 하위 디렉터리가 /raid6/backup 디렉터리에 백업되도록 설정하는 작업이었다. 일정시간마다 백업하는 것이므로 cron과 at 명령어 중 cron을 이용했다. `systemctl status cron`을 입력해서 cron이 제대로 잘 동작하는지, 초록글씨가 보이는지 확인하였고 crontab 디렉터리에 myBackup.sh를 만들고 셸 스크립트 프로그래밍하여 백업할 내용을 적었다. 내용은 다음과 같다.          
```
#!/bin/sh         
set $(date)          
fname="backup-$6$1$2tar.xz"      
tar cfJ /raid6/backup/$fname /home
```
저장 및 종료 한 다음 `mkdir /raid6/backup`을 입력하여 백업파일을 만들고, `01 03 1 * * root /root/myBackup.sh`매월 1일 3시 1분에 myBackup.sh를 실행하도록 명령어를 입력하였다. 그 다음 `systemctl restart cron`을 입력하여 백업 기능을 수행하도록 하였다. 백업이 제대로 되었는지 확인을 위해 `timedatectl set-ntp 0`으로 동기화를 해제한 다음 미래의 1일로 가보았다. `date -s "2022-06-01 03:00:00`을 입력해 시간을 2022년 6월 1일 새벽 3시로 바꾸었다. date를 쳐서 시간을 그때그때 확인하고 1분이 지나면 `ls -l /raid6/backup`명령어를 입력하여 압축파일이 있는지 확인한다. 이상 없으면 `timedatectl set-ntp 1`을 입력해 시간 동기화를 다시 설정한다.        
cron 명령어 쓰는 법은 최근에 배웠는데도 내 기억력에 의심이 가서 강의를 한번 더 봤다. 계속 생각하는 건데 이 부분에서 중요한 건 시간 동기화를 해제한 상태에서 원하는 시간으로 돌려야 된다는 것! cron과 at은 언제봐도 유용한 명령어들이다. 백업파일의 이름을 내 맘대로 설정했는데, 년도를 입력하려 하다가 $6으로 잘못 쳐서 KST(Korea Standard Time)이 나오게 해버렸다. 그치만 결과물을 보니 영어와 숫자가 함께 있는 게 꽤 멋져서 그대로 놔두었다.           
              
### 4) 프로그램 개발 환경 구축          
우분투 소프트웨어에서 설치하는 방법도 있고 인터넷 사이트에서 설치하는 방법이 있는데 나는 인터넷 사이트에서 설치하는 방법을 택했다. 압축이 tar로 되어있는 걸 다운받고 싶었기 때문이다. 그런데 문제가 발생했다. 다운까지 받고 압축도 해제한 것 같은데 Visual Studio Code도 보이지 않고 실행도 되지 않았다. 터미널을 열어서 `sudo snap install code` 명령어를 입력했으나, 에러가 뜨기에 `sudo snap install code --classic`을 입력하였더니 정상적으로 설치가 완료되었다. 그 후 visual studio code 내의 extended 탭에서 Python을 위한 패키지를 다운받고, Python이라는 폴더를 만든 다음 그 안에 hello.py파일을 만들었다. 그 후 `print("hello world")`를 입력하고, 디버그 하기 위한 파이썬 개발환경을 선택한 다음 F5를 눌러서 실행시켰다.             
Visual Studio Code에서는 한번도 코드를 디버깅 한 적이 없어서 초반에 살짝 헤매었다. extended에서 Python을 다운받고, 구글링을 해보는 과정에서 Visual Studio Code에서는 폴더를 기준으로 개발 환경이 구축된다는 것도 알게 되었다. 참고:<https://withcoding.com/62>         
시작하기 전에 엄청 오래 걸릴 줄 알았다. 막상 시작해보니까 아니나 다를까 3~4시간 정도 걸린 것 같다.. 그래도 5시간을 초과하는 스케일의 시간이 걸리지는 않아서 다행이다. 비록 오류가 발생할 때는 땀이 줄줄 나긴 했지만 시간을 많이 들이지 않고 해결방법을 찾아서 행운이라 생각한다. 노트북이 맛이 가있을 때 중요한 과제를 해야만 할 일이 생길까봐 걱정했는데 다행히 중간고사 대체과제를 할 때에는 노트북이 정상적인 상태였던 것 같다.